!function(a,b,c){"use strict";var d,e={},f=[],g={dataSrc:"data-src",dataDpi:"data-resimg-dpi",urlTemplate:"[protocol][hostname][apikey]/[operations][url]"},h={server:"bs1.cdn.telerik.com/image/v1/",apiKey:"",resOnLoad:!0,resOnResize:!0,ssl:!1,resClass:"resimgs",onReady:null,onError:null,debug:!1},i={inArray:function(a,b){for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return!0;return!1},pushIfNotExist:function(a,b,c){this.inArray(a,c)||a.push(b)},each:function(a,b){if(void 0===a||null===a)throw new TypeError;var c=Object(a),d=c.length>>>0;if("function"!=typeof b)throw new TypeError;for(var e=arguments.length>=3?arguments[2]:void 0,f=0;d>f;f++)f in c&&b.call(e,c[f],f,c)},isStringNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},keys:function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}(),extend:function(a){a=a||{};for(var b=1,c=arguments.length;c>b;b++)if(arguments[b])for(var d in arguments[b])arguments[b].hasOwnProperty(d)&&(a[d]=arguments[b][d]);return a},isNullOrEmpty:function(a){return"undefined"==typeof a||null===a||""===a},debounce:function(a,b,c){var d;return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}}};b.getComputedStyle=b.getComputedStyle||function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this},c.getElementsByClassName=c.getElementsByClassName||function(a){var b,d,e,f=[];if(c.querySelectorAll)return c.querySelectorAll("."+a);if(c.evaluate)for(d=".//*[contains(concat(' ', @class, ' '), ' "+a+" ')]",b=c.evaluate(d,c,null,0,null);e=b.iterateNext();)f.push(e);else for(b=c.getElementsByTagName("*"),d=new RegExp("(^|\\s)"+a+"(\\s|$)"),e=0;e<b.length;e++)d.test(b[e].className)&&f.push(b[e]);return f};var j=function(a){return"img"===a},k=function(){var a=e.apiKey,b=i.isNullOrEmpty(a);return b?(console.log("Backend Services API Key is not set."),!1):b||"string"==typeof a?!0:(console.log("Backend Services API Key should be a String"),!1)},l={log:function(){if(e.debug&&console&&"function"==typeof console.log)for(var a=0,b=arguments.length;b>a;a++)console.log(arguments[a])}},m=function(a){return a?"https://":"http://"},n=function(){return b.devicePixelRatio?b.devicePixelRatio:1},o=function(a){var b=q(a,g.dataDpi)||"";return""!==b?i.isNumber(b)?parseFloat(b):!1:n()},p=function(){return c.getElementsByClassName(e.resClass)},q=function(a,b){var c=a.getAttribute(b);return c||!1},r=function(a){var b=[];return i.each(a,function(a){b.push(a[0])}),b},s=function(a){var c=a.parentNode,d=c.offsetWidth,e=b.getComputedStyle(c,null),f=parseFloat(e.getPropertyValue("padding-left")),g=parseFloat(e.getPropertyValue("padding-right")),h=parseFloat(e.getPropertyValue("border-left-width")),i=parseFloat(e.getPropertyValue("border-right-width"));return Math.abs(d-Math.ceil(f+g+h+i))},t=function(a){return Math.ceil(a.offsetWidth)},u=function(a){var c=b.getComputedStyle(a,null),d=c.getPropertyValue("background-image");return"none"!==d?d:!1},v=function(a){if(!a||"undefined"==typeof a||a.length<=1)return!1;for(var b=!1,c=[],d=a.split("/"),e=d.length,f=0;e>f;f++){var g=d[f].split("="),h={};g[1]="undefined"==typeof g[1]?!1:unescape(g[1].replace(/\+/g," ")),h[g[0]]=g[1],c.push(h),"resize"===g[0]&&(b=!0)}return{params:c,isUserResize:b}},w=function(a){var b="",c=a.replace(/.*?resize=[^//]*\//gi,""),d=new RegExp("https?://","gi"),f=new RegExp(e.server,"gi"),g=new RegExp(e.apiKey+"/","gi");return b=a.replace(c,"").replace(d,"").replace(f,"").replace(g,"").toLowerCase(),b=""!==b?b.indexOf("/")?b.substring(0,b.length-1):b:!1,b=v(b),b.isUserResize&&(c=a),{imgUrl:c,operations:b.params,isUserResize:b.isUserResize}},x=function(a){for(var b="",c=0,e=a.length;e>c;c++){var f,g=a[c],h=i.keys(g)[0];if(j(d.tag)||"resize"!==h){var k=o(d.item);k=k?",pd:"+k:"";for(var l in g)f="resize"===h?g[l]+k:g[l];b+=h+"="+f+"/"}}return b},y=function(a){var b=m(e.ssl),c=e.server,f=e.apiKey,h=g.urlTemplate,i=o(d.item);i=i?",pd:"+i:"",h=h.replace("[protocol]",b),h=h.replace("[apikey]",f?f:""),h=h.replace("[hostname]",c);var k=d.operations||!1;if(k){var l="";k=x(k),l=j(d.tag)?a?"resize=w:"+a+i+"/"+k:k:"resize=w:"+a+i+"/"+k,h=h.replace("[operations]",l)}else h=h.replace("[operations]","resize=w:"+a+i+"/");return h=h.replace("[url]",d.imgUrl)},z=function(a,b,c,d){var f=new Image;f.onerror=function(){l.log("ERROR: Can't be loaded: "+this.src);var b=e.onError&&"function"==typeof e.onError;b&&e.onError(a);var c=d&&"function"==typeof d;c&&d(a)},f.onload=function(){j(c)?(a.src=b,a.style.visibility="visible"):a.style.backgroundImage="url("+b+")";var e=d&&"function"==typeof d;e&&d()},f.src=b},A=function(a){k()&&(a=a||p(),i.each(a,function(a){var b=a.tagName.toLowerCase();a={item:a,tag:b,processed:!1},i.pushIfNotExist(f,a,function(b){return b.item===a.item})}),B())},B=function(){var a,b=0,c=f.length;i.each(f,function(a){a.processed=!1}),i.each(f,function(f,g){d=f,a=D(g,function(){b++,b===c&&C(e)})})},C=function(a){var b=a.onReady&&"function"==typeof a.onReady;if(b){var c=[];i.each(f,function(a){a.processed&&c.push(a.item)}),a.onReady({count:c.length,items:c})}},D=function(a,b){var c,e,h,i=d.item,k=d.tag,m=d.processed,n=j(k);if(n?c=q(i,g.dataSrc):(c=u(i),c=c.replace(/url\(('?"?)(.*?)\1\)/gi,"$2")),!c)return void l.log(n?"ERROR: No data-src attribute: "+i.outerHTML:"ERROR: No background-image: "+i.outerHTML);if(e=w(c),d.operations=e.operations,d.imgUrl=e.imgUrl,d.isUserResize=e.isUserResize,d.isUserResize||(h=n?s(i):t(i)),!m){if(h=h?h:!1,!h&&!d.isUserResize)return f[a].processed=!1,void(b&&"function"==typeof b&&b("element is skipped, because it'snot visible.",i,o,k));var o="";return o=d.isUserResize?d.imgUrl:y(h),z(i,o,k,function(c){c||(f[a].processed=!0),b&&"function"==typeof b&&b(c,i,o,k)}),!0}return!1},E=function(a){b.addEventListener?b.addEventListener("resize",i.debounce(a),!1):b.attachEvent&&b.attachEvent("onresize",i.debounce(a))};a.init=function(a){a=a||{},"string"==typeof a&&(a={apiKey:a}),e=i.extend({},h,a),k()&&(f=[],e.resOnLoad&&A(),e.resOnResize&&E(B))},a.responsive=function(a){return f=[],a?(!a.length&&a.nodeType?a=[a]:a.length>1&&!a[0].nodeType&&(a=r(a)),void A(a)):void A()},a.responsiveAll=function(){f=[],A()}}(window.everliveImages=window.everliveImages||{},window,document);